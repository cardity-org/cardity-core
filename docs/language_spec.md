# Cardity è¯­è¨€è§„èŒƒ

## ğŸ“– æ¦‚è¿°

Cardity æ˜¯ä¸€ç§ä¸“ä¸º Cardinals åè®®è®¾è®¡çš„æ™ºèƒ½åˆçº¦è¯­è¨€ï¼Œå…·æœ‰ç®€æ´çš„è¯­æ³•å’Œå¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›ã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **ç®€æ´æ€§**: è¯­æ³•ç®€æ´æ˜äº†ï¼Œæ˜“äºå­¦ä¹ å’Œä½¿ç”¨
2. **ç±»å‹å®‰å…¨**: å¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
3. **å¯è¯»æ€§**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
4. **å¯æ‰©å±•æ€§**: æ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•

## ğŸ“ è¯­æ³•è§„èŒƒ

### ç¨‹åºç»“æ„

æ¯ä¸ª Cardity ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªåè®®å®šä¹‰ï¼š

```cardity
protocol <protocol_name> {
  <metadata>
  <state_block>
  <method_definitions>
}
```

### å…ƒæ•°æ® (Metadata)

åè®®çš„åŸºæœ¬ä¿¡æ¯ï¼š

```cardity
version: "<version_string>";
owner: "<owner_address>";
```

**è§„åˆ™**:
- `version`: åè®®ç‰ˆæœ¬å·ï¼Œå­—ç¬¦ä¸²æ ¼å¼
- `owner`: åè®®æ‰€æœ‰è€…åœ°å€ï¼Œå­—ç¬¦ä¸²æ ¼å¼
- æ¯ä¸ªå…ƒæ•°æ®é¡¹ä»¥åˆ†å·ç»“å°¾

### çŠ¶æ€å— (State Block)

å®šä¹‰åè®®çš„çŠ¶æ€å˜é‡ï¼š

```cardity
state {
  <variable_name>: <type> = <default_value>;
  <variable_name>: <type> = <default_value>;
  ...
}
```

**è§„åˆ™**:
- å˜é‡åå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ ‡è¯†ç¬¦
- æ”¯æŒçš„ç±»å‹ï¼š`string`, `int`, `bool`
- é»˜è®¤å€¼æ˜¯å¯é€‰çš„
- æ¯ä¸ªå˜é‡å®šä¹‰ä»¥åˆ†å·ç»“å°¾

**ç¤ºä¾‹**:
```cardity
state {
  count: int = 0;
  message: string = "Hello";
  active: bool = true;
}
```

### æ–¹æ³•å®šä¹‰ (Method Definitions)

å®šä¹‰åè®®çš„æ–¹æ³•ï¼š

```cardity
method <method_name>(<parameters>) {
  <statements>
}
```

**è§„åˆ™**:
- æ–¹æ³•åå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ ‡è¯†ç¬¦
- å‚æ•°åˆ—è¡¨å¯ä»¥ä¸ºç©º
- å¤šä¸ªå‚æ•°ç”¨é€—å·åˆ†éš”
- æ–¹æ³•ä½“ç”¨å¤§æ‹¬å·åŒ…å›´

**ç¤ºä¾‹**:
```cardity
method increment() {
  state.count = state.count + 1;
}

method set_message(msg) {
  state.message = msg;
}
```

## ğŸ”¤ è¯æ³•è§„èŒƒ

### æ ‡è¯†ç¬¦

- ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´
- åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
- åŒºåˆ†å¤§å°å†™

**æœ‰æ•ˆæ ‡è¯†ç¬¦**:
```
counter
set_count
_private
user123
```

**æ— æ•ˆæ ‡è¯†ç¬¦**:
```
123counter  // ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
set-count   // ä¸èƒ½åŒ…å«è¿å­—ç¬¦
```

### å…³é”®å­—

ä¿ç•™å…³é”®å­—ï¼Œä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ï¼š

```
protocol
state
method
version
owner
return
string
int
bool
true
false
```

### å­—é¢é‡

#### å­—ç¬¦ä¸²å­—é¢é‡

ç”¨åŒå¼•å·åŒ…å›´ï¼š

```cardity
"Hello, World!"
"doge1abc..."
""
```

**è½¬ä¹‰å­—ç¬¦**:
- `\"`: åŒå¼•å·
- `\\`: åæ–œæ 
- `\n`: æ¢è¡Œç¬¦
- `\t`: åˆ¶è¡¨ç¬¦

#### æ•°å­—å­—é¢é‡

æ•´æ•°æ ¼å¼ï¼š

```cardity
0
42
-123
```

#### å¸ƒå°”å­—é¢é‡

```cardity
true
false
```

### æ“ä½œç¬¦

#### ç®—æœ¯æ“ä½œç¬¦

```cardity
+  // åŠ æ³•
-  // å‡æ³•
*  // ä¹˜æ³•
/  // é™¤æ³•
```

#### èµ‹å€¼æ“ä½œç¬¦

```cardity
=  // èµ‹å€¼
```

#### é€»è¾‘æ“ä½œç¬¦

```cardity
!  // é€»è¾‘é
```

#### æˆå‘˜è®¿é—®æ“ä½œç¬¦

```cardity
.  // æˆå‘˜è®¿é—®
```

### åˆ†éš”ç¬¦

```cardity
(  )  // åœ†æ‹¬å·
{  }  // å¤§æ‹¬å·
[  ]  // æ–¹æ‹¬å·
,     // é€—å·
;     // åˆ†å·
:     // å†’å·
```

## ğŸ“‹ è¯­ä¹‰è§„èŒƒ

### ç±»å‹ç³»ç»Ÿ

#### åŸºæœ¬ç±»å‹

1. **string**: å­—ç¬¦ä¸²ç±»å‹
   - å€¼ï¼šä»»æ„å­—ç¬¦ä¸²
   - é»˜è®¤å€¼ï¼š`""`

2. **int**: æ•´æ•°ç±»å‹
   - å€¼ï¼š32ä½æ•´æ•°
   - é»˜è®¤å€¼ï¼š`0`

3. **bool**: å¸ƒå°”ç±»å‹
   - å€¼ï¼š`true` æˆ– `false`
   - é»˜è®¤å€¼ï¼š`false`

#### ç±»å‹å…¼å®¹æ€§

- èµ‹å€¼æ—¶ï¼Œç›®æ ‡ç±»å‹å¿…é¡»ä¸æºç±»å‹åŒ¹é…
- ä¸æ”¯æŒéšå¼ç±»å‹è½¬æ¢
- ç®—æœ¯è¿ç®—åªèƒ½åœ¨ç›¸åŒç±»å‹é—´è¿›è¡Œ

### ä½œç”¨åŸŸè§„åˆ™

1. **å…¨å±€ä½œç”¨åŸŸ**: åè®®çº§åˆ«çš„å…ƒæ•°æ®å’ŒçŠ¶æ€å˜é‡
2. **æ–¹æ³•ä½œç”¨åŸŸ**: æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡
3. **çŠ¶æ€è®¿é—®**: æ–¹æ³•å†…å¯ä»¥é€šè¿‡ `state.` è®¿é—®çŠ¶æ€å˜é‡

### è¡¨è¾¾å¼

#### å­—é¢é‡è¡¨è¾¾å¼

```cardity
42        // æ•°å­—å­—é¢é‡
"hello"   // å­—ç¬¦ä¸²å­—é¢é‡
true      // å¸ƒå°”å­—é¢é‡
```

#### æ ‡è¯†ç¬¦è¡¨è¾¾å¼

```cardity
count     // å˜é‡å¼•ç”¨
new_msg   // å‚æ•°å¼•ç”¨
```

#### æˆå‘˜è®¿é—®è¡¨è¾¾å¼

```cardity
state.count    // çŠ¶æ€å˜é‡è®¿é—®
state.message  // çŠ¶æ€å˜é‡è®¿é—®
```

#### ç®—æœ¯è¡¨è¾¾å¼

```cardity
state.count + 1
state.count - 1
state.count * 2
state.count / 2
```

#### é€»è¾‘è¡¨è¾¾å¼

```cardity
!state.active
```

### è¯­å¥

#### èµ‹å€¼è¯­å¥

```cardity
<target> = <expression>;
```

**è§„åˆ™**:
- ç›®æ ‡å¿…é¡»æ˜¯å¯èµ‹å€¼çš„è¡¨è¾¾å¼
- è¡¨è¾¾å¼ç±»å‹å¿…é¡»ä¸ç›®æ ‡ç±»å‹åŒ¹é…
- ä»¥åˆ†å·ç»“å°¾

**ç¤ºä¾‹**:
```cardity
state.count = 42;
state.message = "Hello";
state.active = true;
```

#### è¿”å›è¯­å¥

```cardity
return <expression>;
```

**è§„åˆ™**:
- è¡¨è¾¾å¼æ˜¯å¯é€‰çš„
- ä»¥åˆ†å·ç»“å°¾

**ç¤ºä¾‹**:
```cardity
return state.count;
return;
```

## ğŸ” é”™è¯¯å¤„ç†

### ç¼–è¯‘æ—¶é”™è¯¯

1. **è¯­æ³•é”™è¯¯**: ä¸ç¬¦åˆè¯­æ³•è§„èŒƒ
2. **ç±»å‹é”™è¯¯**: ç±»å‹ä¸åŒ¹é…
3. **æœªå®šä¹‰é”™è¯¯**: ä½¿ç”¨æœªå®šä¹‰çš„æ ‡è¯†ç¬¦
4. **é‡å¤å®šä¹‰é”™è¯¯**: é‡å¤å®šä¹‰æ ‡è¯†ç¬¦

### é”™è¯¯æ¶ˆæ¯æ ¼å¼

```
Error: <error_type> at line <line_number>: <description>
```

**ç¤ºä¾‹**:
```
Error: Syntax error at line 5: Expected ';' after variable definition
Error: Type error at line 10: Cannot assign string to int
```

## ğŸ“š ç¤ºä¾‹

### ç®€å•è®¡æ•°å™¨

```cardity
protocol counter {
  version: "1.0";
  owner: "doge1counter...";

  state {
    count: int = 0;
  }

  method increment() {
    state.count = state.count + 1;
  }

  method decrement() {
    state.count = state.count - 1;
  }

  method get_count() {
    return state.count;
  }
}
```

### æ¶ˆæ¯å­˜å‚¨

```cardity
protocol message_store {
  version: "1.0";
  owner: "doge1message...";

  state {
    message: string = "";
    active: bool = true;
  }

  method set_message(msg) {
    state.message = msg;
  }

  method get_message() {
    return state.message;
  }

  method toggle_active() {
    state.active = !state.active;
  }
}
```

## ğŸ”® æœªæ¥æ‰©å±•

### è®¡åˆ’ä¸­çš„åŠŸèƒ½

1. **æ›´å¤šç±»å‹**: `float`, `array`, `struct`
2. **æ§åˆ¶æµ**: `if/else`, `for`, `while`
3. **äº‹ä»¶**: `event` å£°æ˜å’Œè§¦å‘
4. **æƒé™æ§åˆ¶**: `only_owner` ä¿®é¥°ç¬¦
5. **çŠ¶æ€æœº**: çŠ¶æ€è½¬æ¢æ”¯æŒ

### å‘åå…¼å®¹æ€§

- æ–°ç‰ˆæœ¬å°†ä¿æŒå‘åå…¼å®¹
- åºŸå¼ƒçš„åŠŸèƒ½å°†æä¾›è¿ç§»æŒ‡å—
- é‡å¤§å˜æ›´å°†æå‰é€šçŸ¥ 